<clr-main-container>
  <app-filter
    [status]="status"
    (applyFilter)="onApplyFiltering($event)"
    (resetFilter)="onResetFiltering()"></app-filter>

  @if (isMobileBreakpoint$ | async) {
    is Mobile!
  }

  <ng-container *ngIf="vm$ | async as vm">
    @if ((isMobileBreakpoint$ | async) === false) {
      <clr-datagrid [clrDgLoading]="loading$ | async">
        <clr-dg-column *ngFor="let head of headers">{{ head }}</clr-dg-column>

        <clr-dg-row *ngFor="let item of vm.items">
          <clr-dg-cell>{{ item.id }}</clr-dg-cell>
          <clr-dg-cell>{{ item.status }}</clr-dg-cell>
          <clr-dg-cell>{{ item.amount | currency: item.currency }}</clr-dg-cell>
          <clr-dg-cell>{{ item.currency }}</clr-dg-cell>
          <clr-dg-cell>{{ item.description }}</clr-dg-cell>
          <clr-dg-cell>{{ item.createdAt | date }}</clr-dg-cell>
        </clr-dg-row>

        <clr-dg-footer>
          <clr-dg-pagination
            #pagination
            [clrDgPageSize]="5"
            [clrDgTotalItems]="vm.pagination.totalNumberOfItems"
            [(clrDgPage)]="vm.pagination.currentPage"
            (clrDgPageChange)="applyPaging($event, vm)">
            {{ pagination.firstItem + 1 }} - {{ pagination.lastItem + 1 }} of
            {{ pagination.totalItems }} transactions
          </clr-dg-pagination>
        </clr-dg-footer>
      </clr-datagrid>
    } @else {
      <div class="cards-container">
        <div class="clr-row" *ngFor="let transaction of vm.items">
          <div class="clr-col-lg-6 clr-col-12">
            <div class="card">
              <div class="card-header">
                <div class="heading">
                  <h3>{{ transaction.id }}</h3>
                </div>
                <div class="label label-info">
                  <div class="tag">
                    {{ transaction.status }}
                  </div>
                </div>
              </div>
              <div class="card-block">
                <div class="card-media-block">
                  <div class="currency">
                    <h4>
                      {{ transaction.amount | currency: transaction.currency }}
                    </h4>
                  </div>
                  <div class="card-media-description">
                    <div class="card-media-title">
                      {{ transaction.description }}
                    </div>

                    <div class="card-media-text" style="">
                      {{ transaction.createdAt | date }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    }
  </ng-container>
</clr-main-container>
